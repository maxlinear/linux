# SPDX-License-Identifier: GPL-2.0
%YAML 1.2
---
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: MaxLinear XPCS driver for LGM or PRX

properties:
  compatible:
    items:
      - const: mxl,lgm-xpcs
      - const: mxl,prx-xpcs
      - const: mxl,lgm-xpcs-c10

  reg:
    items:
      - description: address and length of the register set for the device.

  interrupts:
    items:
      - description: IRQ line info for CQM. The interrupt specifier
                     depends on the interrupt-parent interrupt controller

  clocks:
    items:
      - description: clocks source for CQM

  power-domains:
    items:
      - description: reference to power domain for cqm

  lineclk,syscon:
    items:
      - description: reference to hsio syscon

  lineclk,offset:
    items:
      - description: hsio syscon offset

  lineclk,bit:
    items:
      - description: bit in hsio syscon offset

  mpllb:
    items:
      - description: whether MPLLB is used

  phys:
    items:
      - description: reference to phy for XPCS

  phy-names:
    items:
      - description: name of the phy

  slave:
    items:
      - description: whether the XPCS is a slave deivce in an XPCS pair

  pair:
    items:
      - description: reference to slave deivce in an XPCS pair

  mxl,cbphy_app:
    item:
      - description: reference to combophy application syscon

examples:
  - |
    hsiol_xpcs1: xpcs@1 {
        compatible = "mxl,lgm-xpcs";
        status = "disabled";
        reg = <0xD0B42000 0x400>;
        clocks = <&cgu0 LGM_GCLK_XPCS1>;
        interrupt-parent = <&ioapic1>;
        interrupts = <56 1>;
        lineclk,syscon = <&hsiol>;
        lineclk,offset = <0x134>;
        lineclk,bit = <0>;
        xpcs-name = "hsiol_xpcs1";
        xpcs-mode = <6>; /* <0> - SGMII, <1> - 1000BaseX, <2> - 2500BaseX, <3> - 5GBaseR, <4> - 10GBaseR, <5> - USXGMII, <6> - 10GKR, <7> - QUSXGMII */
        xpcs-cl37 = <3 3 3 0 0 1 0 1>; /* <0> - disable, <1> - SGMII MAC side, <2> - SGMII PHY side, <3> - BaseX */
        xpcs-cl73 = <0 0 0 0 0 0 0 0>; /* <0> - disable, <1> - enable */
        mpllb = <1>;
        phys = <&cb0phy1 PHY_TYPE_XPCS_SL>;
        phy-names = "phy";
        power-domains = <&pd_hsio1>;
        slave = <1>;
    };
    hsiol_xpcs0: xpcs@0 {
        compatible = "mxl,lgm-xpcs";
        status = "disabled";
        reg = <0xD0A42000 0x400>;
        clocks = <&cgu0 LGM_GCLK_XPCS0>;
        interrupt-parent = <&ioapic1>;
        interrupts = <55 1>;
        lineclk,syscon = <&hsiol>;
        lineclk,offset = <0x130>;
        lineclk,bit = <0>;
        xpcs-name = "hsiol_xpcs0";
        xpcs-mode = <6>; /* <0> - SGMII, <1> - 1000BaseX, <2> - 2500BaseX, <3> - 5GBaseR, <4> - 10GBaseR, <5> - USXGMII, <6> - 10GKR, <7> - QUSXGMII */
        xpcs-cl37 = <3 3 3 0 0 1 0 1>; /* <0> - disable, <1> - SGMII MAC side, <2> - SGMII PHY side, <3> - BaseX */
        xpcs-cl73 = <0 0 0 0 0 0 0 0>; /* <0> - disable, <1> - enable */
        mpllb = <1>;
        phys = <&cb0phy0 PHY_TYPE_XPCS_SL>;
        phy-names = "phy";
        pair = <&hsiol_xpcs1>;
        power-domains = <&pd_hsio1>;
    };
